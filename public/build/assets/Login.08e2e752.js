import{J as N,aN as C,B as w,L as p,M as $,Q as T,T as E,k as y,D as L,r as l,o as c,e as U,f as i,w as u,u as e,l as b,x as h,h as B,i as _,t as k,U as j,a as G}from"./vendor.7b75e1d8.js";import{u as R,a as A}from"./main.95b7e1a2.js";const F=["onSubmit"],J={class:"mt-5 mb-8"},O={class:"mb-4"},H={setup(P){const I=R(),s=A(),{t:m}=N(),S=C(),d=w(!1);let o=w(!1);const V={email:{required:p.withMessage(m("validation.required"),$),email:p.withMessage(m("validation.email_incorrect"),T)},password:{required:p.withMessage(m("validation.required"),$)}},a=E(V,y(()=>s.loginData));L(()=>{localStorage.getItem("authToken")&&S.push("/admin/dashboard")});const x=y(()=>o.value?"text":"password");async function D(){if(G.defaults.withCredentials=!0,a.value.$touch(),a.value.$invalid)return!0;d.value=!0;try{d.value=!0,await s.login(s.loginData),I.showNotification({type:"success",message:"Logged in successfully."}),setTimeout(()=>{window.location.href="/admin/dashboard"},1e3)}catch{d.value=!1}}return(n,t)=>{const g=l("BaseInput"),f=l("BaseInputGroup"),v=l("BaseIcon"),q=l("router-link"),M=l("BaseButton");return c(),U("form",{id:"loginForm",class:"mt-12 text-left",onSubmit:j(D,["prevent"])},[i(f,{error:e(a).email.$error&&e(a).email.$errors[0].$message,label:n.$t("login.email"),class:"mb-4",required:""},{default:u(()=>[i(g,{modelValue:e(s).loginData.email,"onUpdate:modelValue":t[0]||(t[0]=r=>e(s).loginData.email=r),invalid:e(a).email.$error,focus:"",type:"email",name:"email",onInput:t[1]||(t[1]=r=>e(a).email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),i(f,{error:e(a).password.$error&&e(a).password.$errors[0].$message,label:n.$t("login.password"),class:"mb-4",required:""},{default:u(()=>[i(g,{modelValue:e(s).loginData.password,"onUpdate:modelValue":t[4]||(t[4]=r=>e(s).loginData.password=r),invalid:e(a).password.$error,type:e(x),name:"password",onInput:t[5]||(t[5]=r=>e(a).password.$touch())},{right:u(()=>[e(o)?(c(),b(v,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[2]||(t[2]=r=>h(o)?o.value=!e(o):o=!e(o))})):(c(),b(v,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[3]||(t[3]=r=>h(o)?o.value=!e(o):o=!e(o))}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["error","label"]),B("div",J,[B("div",O,[i(q,{to:"forgot-password",class:"text-sm text-primary-400 hover:text-gray-700"},{default:u(()=>[_(k(n.$t("login.forgot_password")),1)]),_:1})])]),i(M,{loading:d.value,type:"submit"},{default:u(()=>[_(k(n.$t("login.login")),1)]),_:1},8,["loading"])],40,F)}}};export{H as default};
