import{a as s,d as p,aN as m,r as h,o as d,e as u,f,w as v,l as _,aj as w,h as g}from"./vendor.7b75e1d8.js";import{h as i,b as S,_ as b}from"./main.95b7e1a2.js";const C=(r=!1)=>{const l=r?window.pinia.defineStore:p,c=S();return l({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,app_url:window.location.origin}}),actions:{fetchInstallationRequirements(){return new Promise((e,o)=>{s.get("/api/v1/installation/requirements").then(a=>{e(a)}).catch(a=>{i(a),o(a)})})},fetchInstallationStep(){return new Promise((e,o)=>{s.get("/api/v1/installation/wizard-step").then(a=>{e(a)}).catch(a=>{i(a),o(a)})})},addInstallationStep(e){return new Promise((o,a)=>{s.post("/api/v1/installation/wizard-step",e).then(n=>{o(n)}).catch(n=>{i(n),a(n)})})},fetchInstallationPermissions(){return new Promise((e,o)=>{s.get("/api/v1/installation/permissions").then(a=>{e(a)}).catch(a=>{i(a),o(a)})})},fetchInstallationDatabase(e){return new Promise((o,a)=>{s.get("/api/v1/installation/database/config",{params:e}).then(n=>{o(n)}).catch(n=>{i(n),a(n)})})},addInstallationDatabase(e){return new Promise((o,a)=>{s.post("/api/v1/installation/database/config",e).then(n=>{o(n)}).catch(n=>{i(n),a(n)})})},addInstallationFinish(){return new Promise((e,o)=>{s.post("/api/v1/installation/finish").then(a=>{c.setSelectedCompany(a.data.company),e(a)}).catch(a=>{i(a),o(a)})})},setInstallationDomain(e){return new Promise((o,a)=>{s.put("/api/v1/installation/set-domain",e).then(n=>{o(n)}).catch(n=>{i(n),a(n)})})},installationLogin(){return new Promise((e,o)=>{s.post("/api/v1/installation/login").then(a=>{c.setSelectedCompany(a.data.company),e(a)}).catch(a=>{i(a),o(a)})})},checkAutheticated(){return new Promise((e,o)=>{s.get("/api/v1/auth/check").then(a=>{e(a)}).catch(a=>{o(a)})})}}})()};var y="/img/crater-logo.png";const P={setup(){m();const r=C();l();async function l(){try{await r.addInstallationFinish(),(await r.checkAutheticated()).data&&emit("next",4),isSaving.value=!1}catch{notificationStore.showNotification({type:"error",message:t("wizard.verify_domain.failed")}),isSaving.value=!1}}function c(e){}return{stepComponent,currentStepNumber,onStepChange,saveStepProgress,onNavClick:c}}},k={class:"flex flex-col items-center justify-between w-full pt-10"},I=g("img",{id:"logo-crater",src:y,alt:"Crater Logo",class:"h-12 mb-5 md:mb-10"},null,-1);function x(r,l,c,e,o,a){const n=h("BaseWizard");return d(),u("div",k,[I,f(n,{steps:7,"current-step":e.currentStepNumber,onClick:e.onNavClick},{default:v(()=>[(d(),_(w(e.stepComponent),{onNext:e.onStepChange},null,8,["onNext"]))]),_:1},8,["current-step","onClick"])])}var D=b(P,[["render",x]]);export{D as default};
